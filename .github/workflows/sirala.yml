on: 
  issue_comment:
    types: [created]
name: sort-cases
jobs:
  sort:
    name: Sort
    if: github.event.issue.pull_request != '' && contains(github.event.comment.body, '/sortcases')
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@master
    - name: Automatic Sort Cases
      uses: erkekin/sort-enums-action@v3
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    - run: |
        curl -sL https://github.com/erkekin/sort-enums-action/releases/download/v2/v2.tar | tar xz
        chmod u+x ./v2/caseSorter-swift
        cat /Tests/CaseSorterTests/CaseSorterTests.swift
        rm -rf v2
      id: download-sorter
    - name: Create Pull Request
      uses: peter-evans/create-pull-request@v1
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
        commit-message: enum cases sorted
        title: Case Sorter in Action
        body: This is an auto-generated PR with fixes by case sorter tool.
        labels: sort, automated pr
        branch: ${{ steps.vars.outputs.branch-name }}
        branch-suffix: none
  # https://github.community/t5/GitHub-Actions/Workflow-is-failing-if-no-job-can-be-ran-due-to-condition/m-p/38186#M3250
  always_job:
    name: Aways run job
    runs-on: ubuntu-latest
    steps:
      - name: Always run
        run: echo "This job is used to prevent the workflow to fail when all other jobs are skipped."
